<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dSupplierList">
<!--    'System        : m.62life.com
    'Program       :
    'Title         : 자연이랑 - 업체 직송 공급자 목록
    'File          : d_supplier_list_m.asp
    'Program Type  : asp
    'Analyst       :
    'Author        : hwkim
    'Date Started  : 20190307
    'Last Modified :
    'Called By     :
    'Parameters    :
    'Purpose       :
    'Version       :
    '
    'Modified   Author  V/M     Reason For Modification

    '20190307   hwkim   0.9     처음 작성-->
    <select id="supplierListPaging">
        /* supplierListPaging 업체 직송 공급자 리스트 페이징*/
        SELECT CEILING( CAST(COUNT(1) AS FLOAT)/ #{intPagePerItem}  ) MAXPAGE
             , COUNT(sunasu) CNT
        FROM WMSL_WSSUPP
         WHERE 1 = 1
           AND sucdsu IN ('2','D')
    </select>

    <select id="supplierList">
        /* supplierList 업체 직송 공급자 리스트*/
        SELECT * FROM ( 
                        SELECT FLOOR( (ROW_NUMBER() OVER ( ORDER BY sunasu ) - 1 ) /  #{intPagePerItem}  + 1) AS PAGE
                             , sunasu
                        FROM WMSL_WSSUPP
                         WHERE 1 = 1
                           AND sucdsu IN ('2','D')
                      ) AS pl
                 WHERE PAGE = #{intPage}
    </select>
</mapper>