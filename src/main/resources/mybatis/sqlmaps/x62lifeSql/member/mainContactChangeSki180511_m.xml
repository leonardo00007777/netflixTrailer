<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mainContactChangeSki180511">
<!--    '프로젝트: 자연이랑 모바일 웹-->
<!--    '프로그램: 실사용자 연락처 정보 업데이트 캠페인 (SKI - 20180511)-->

<!--    '20180511   hyeok   처음작성-->
    <select id="getPersonalInfo" statementType="CALLABLE">
       /* getPersonalInfo 개인정보 불러오기*/
       {CALL encryptionOpen
        SELECT a.memcd
             , CONVERT(VARCHAR(14),DECRYPTBYKEY(a.hpno_enc)) hpno
             , CONVERT(VARCHAR(14),DECRYPTBYKEY(a.telno_enc)) telno
             , a.smsyn
             , a.emailyn
             , ISNULL(a.telyn,'N') telyn
             , a.hpno alreadychange
             , CASE WHEN a.grpcd IN ('59','35','101','150','108','97') THEN 'Y' ELSE 'N' END targetgrp
        FROM mb_master a
         WHERE a.memcd = #{strLoginMemCD}
        CALL encryptionClose}
    </select>
</mapper>