<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mySetDetail">
<!--    'System        : m.62life.com
    'Program       :
    'Title         : 자연이랑모바일 - 내가 만드는 묶음상품 상세정보
    'File          : mysetdetail_m.asp
    'Program Type  : asp
    'Analyst       :
    'Author        : hwkim
    'Date Started  : 20151015
    'Last Modified :
    'Called By     :
    'Parameters    :
    'Purpose       :
    'Version       :
    '
    'Modified   Author  V/M     Reason For Modification

    '20151015   hwkim   0.9     처음 작성
    '20161204   hyeok   0.9.1   사이트 리뉴얼 layout적용
    '20161212   hwkim   0.9.2   레이아웃 표준 규칙 수정-->

    <select id="getMySetRecipe">
        SELECT t.titlex
             , t.indt
             , t.hmemo
             , t.memcd
             , t.pic1
             , t2.memname
             , t2.memid
             , t.icount
             , t.scount
             , t.rcount
             , t.share
        FROM CART_RECIPE_HEADER t
          JOIN MB_MASTER t2
            ON t.memcd = t2.memcd
         WHERE t.hseqno = #{hseqno}
    </select>

<!-- 미사용
     <select id="getMySetTagList">
        /* getMySetTagList 태그목록 획득 */
        SELECT (SELECT btname FROM basictag WHERE btidx=t.btidx) AS btname
        FROM basictagmap t
         WHERE btype = #{tagTypeMySet}
          AND bidx = #{hseqno}
    </select>
-->
    <select id="getMySetProdList">
        SELECT t.gdcd
             , t.gdqty
             , t.lmemo
             , gm.gdname
             , gm.useyn
             , gm.soldoutyn
             , ISNULL(gc.gdcnt , 99999) AS gdcnt
             , gm.gdimg
             , gm.PRICE1
             , dbo.getProductPrice('96','M',t.gdcd) price
             , gm.soldoutyn
        FROM CART_RECIPE_LINE t
          JOIN GD_MASTER gm
            ON t.gdcd = gm.gdcd
          LEFT JOIN GD_CNT gc
                 ON t.gdcd = gc.GDCD
         WHERE t.lseqno = #{hseqno}
        ORDER BY t.lno
    </select>
</mapper>