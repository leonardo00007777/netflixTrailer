<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="targetProductList">
    <select id="">
        SELECT TOP 25
               g.gdcd
             , g.gdname gdnm
             , g.unit
             , g.price1 apply_price
             , g.gdimg
             , g.divcd
             , g.div1
             , ISNULL(b.bpriority,9999)
             , g.updt
             , ISNULL(d.cdname,'별도표기') AS gradedesc
        FROM gd_master g
          JOIN basictagmap b ON b.bidx = g.gdcd
          LEFT JOIN gd_item c ON c.gdcd = g.gdcd
          LEFT JOIN cd_master d ON d.cdtype = '09'
                               AND d.cdcode = c.typecd
         WHERE 1 = 1
           AND g.divcd IN ('20','30')
           AND g.useyn = 'Y'
           AND b.btype = #{tagTypeProduct}
           AND b.bid = #{tagIdProduct}
           AND b.btidx IN ( #{tagNumberList} )
        GROUP BY g.gdcd, g.gdname, g.unit, g.price1, g.gdimg, g.divcd, g.div1, b.bpriority, g.updt, d.cdname
        ORDER BY ISNULL(bpriority,9999), updt DESC
    </select>
</mapper>