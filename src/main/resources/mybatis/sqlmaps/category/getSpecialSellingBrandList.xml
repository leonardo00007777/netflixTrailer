<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.x62life.mo.dao.category.CategoryDao">
<!--    'System        : m.62life.com-->
<!--    'Program       :-->
<!--    'Title         : 자연이랑모바일 - 전문관 정보 가져오기-->
<!--    'File          : get_specialselling_brand_list_m.asp-->
<!--    'Program Type  : asp-->
<!--    'Analyst       :-->
<!--    'Author        : hwkim-->
<!--    'Date Started  : 20161116-->
<!--    'Last Modified :-->
<!--    'Called By     :-->
<!--    'Parameters    :-->
<!--    'Purpose       :-->
<!--    'Version       :-->
<!--    '-->
<!--    'Modified   Author  V/M     Reason For Modification-->

<!--    '20180502   hwkim   0.9     처음 작성-->
<!--    '20190103   hwkim   -       배너 별 간격 설정-->
    <select id="getSpecialSellingBrandListPaging" parameterType="java.util.Map" resultType="java.util.Map">
        /* getSpecialSellingBrandListPaging 전문관 상품 리스트 페이징*/
        SELECT CEILING( CAST(COUNT(1) AS FLOAT)/ #{intPagePerItem} ) maxpage
             , COUNT(shidx) cnt
        FROM specialsellingh
         WHERE 1 = 1
           AND shrtype = 'BR'
           <![CDATA[
           AND shstartdt <= GETDATE()
           AND shenddt > GETDATE()
           AND ISNULL(shhideyn, 'N') <> 'Y'
           AND shidx IN (264,265)
           ]]>
    </select>

    <select id="getSpecialSellingBrandHeader" parameterType="java.util.Map" resultType="sepcialSellingh">
        /* getSpecialSellingBrandHeader 전문관 헤더 정보*/
        SELECT *
        FROM (
                 SELECT FLOOR((ROW_NUMBER() OVER ( ORDER BY shidx ) - 1 ) / #{intPagePerItem} + 1) AS page
                      , h.*
                 FROM specialsellingh h
                  WHERE 1 = 1
                    AND shrtype = 'BR'
                    <![CDATA[
                    AND shstartdt <= GETDATE()
                    AND shenddt > GETDATE()
                    AND ISNULL(shhideyn, 'N') <> 'Y'
                    AND shidx IN (264,265)
                    ]]>
             ) pl
        WHERE page = #{intPage}
        ORDER BY shidx DESC
    </select>
</mapper>
